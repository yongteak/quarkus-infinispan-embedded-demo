<infinispan>
    <jgroups transport="org.infinispan.remoting.transport.jgroups.JGroupsTransport">
        <stack name="mping">
            <TCP bind_addr="${infinispan.bind_addr}" bind_port="7800" port_range="30" />
            <!-- <TCPPING initial_hosts="${infinispan.initial.hosts:localhost[7800]}" xmlns="urn:org:jgroups"/> -->
            <!-- <TCPGOSSIP initial_hosts="${infinispan.gossip.router.hosts:localhost[12001]}" xmlns="urn:org:jgroups"/> -->

            <TCPPING async_discovery="true"
             initial_hosts="${infinispan.gossip.router.hosts:localhost[12001]}"
             port_range="0"/>

            <!-- <TCPGOSSIP timeout="3000"initial_hosts="${infinispan.initial.hosts:localhost[7800]}" num_initial_members="3" /> -->
            <!-- <TCPGOSSIP initial_hosts="192.168.12.113[7800],192.168.12.113[7801],192.168.12.113[7802]" xmlns="urn:org:jgroups"/> -->


<MERGE3  min_interval="10000"
             max_interval="30000"/>
    <FD_SOCK/>
    <FD timeout="3000" max_tries="3" />
    <VERIFY_SUSPECT timeout="1500"  />
    <BARRIER />
    <pbcast.NAKACK2 use_mcast_xmit="false"
                    discard_delivered_msgs="true"/>
    <UNICAST3 />
    <pbcast.STABLE stability_delay="1000" desired_avg_gossip="50000"
                   max_bytes="4M"/>
    <pbcast.GMS print_local_addr="true" join_timeout="3000"
                view_bundling="true"/>
    <UFC max_credits="2M" min_threshold="0.4"/>
    <MFC max_credits="2M" min_threshold="0.4"/>
    <FRAG2 frag_size="60K"  />
    <pbcast.STATE_TRANSFER/>

        </stack>
    </jgroups>
    <cache-container default-cache="myDefaultCache">
    
        <transport cluster="${infinispan.cluster.name:local}"
                   stack="mping"
                   node-name="${infinispan.node.name:}">
        </transport>

        <global-state enabled="true">
            <persistent-location path="${infinispan.store.persistent.path:data}"/>
            <temporary-location path="${infinispan.store.temporary.path:data}"/>
            <overlay-configuration-storage />
        </global-state>

        <distributed-cache-configuration name="myDistributedCacheTemplate"
                                         mode="SYNC"
                                         statistics="true"
                                         owners="1">
            <expiration lifespan="-1" max-idle="-1"/>                                        
            <encoding>
                <key media-type="text/plain"/>
                <value media-type="application/x-protostream"/>
            </encoding>
        </distributed-cache-configuration>
        <distributed-cache name="myDefaultCache" configuration="myDistributedCacheTemplate">
        <transaction mode="NON_XA"/>
            <persistence>
                <file-store path="${infinispan.store.persistence.path:data}"/>
            </persistence>
            <!--
                timeout: 상태 전송 과정이 완료되기를 기다리는 최대 시간(밀리초 단위)입니다.
                chunk-size: 한 번에 전송되는 데이터의 최대 크기(바이트 단위)입니다.
            -->
            <state-transfer timeout="60000" chunk-size="1000"/>
        </distributed-cache>
    </cache-container>
</infinispan>